<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°”ë‘‘ ì—°ìŠµ ì›¹ì•±</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: bold;
        }

        .game-area {
            display: flex;
            padding: 20px;
            gap: 20px;
        }

        .board-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .board {
            background: #deb887;
            border: 3px solid #8b7355;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .board-grid {
            display: grid;
            grid-template-columns: repeat(19, 25px);
            grid-template-rows: repeat(19, 25px);
            gap: 0;
            position: relative;
        }

        .intersection {
            width: 25px;
            height: 25px;
            position: relative;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ê°€ë¡œì„  */
        .intersection::before {
            content: '';
            position: absolute;
            background: #2c1810;
            height: 2px;
            width: 100%;
            top: 50%;
            transform: translateY(-50%);
            z-index: 1;
        }

        /* ì„¸ë¡œì„  */
        .intersection::after {
            content: '';
            position: absolute;
            background: #2c1810;
            width: 2px;
            height: 100%;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1;
        }

        /* ê²½ê³„ì„  ì²˜ë¦¬ */
        .intersection.top-edge::after {
            height: 50%;
            top: 50%;
        }

        .intersection.bottom-edge::after {
            height: 50%;
            top: 0;
        }

        .intersection.left-edge::before {
            width: 50%;
            left: 50%;
        }

        .intersection.right-edge::before {
            width: 50%;
            left: 0;
        }

        .stone {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            position: absolute;
            z-index: 10;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .stone.black {
            background: radial-gradient(circle at 30% 30%, #555, #000);
            border: 1px solid #333;
            color: white;
            text-shadow: 0 0 2px rgba(0,0,0,0.8);
        }

        .stone.white {
            background: radial-gradient(circle at 30% 30%, #fff, #ddd);
            border: 1px solid #aaa;
            color: #333;
            text-shadow: 0 0 2px rgba(255,255,255,0.8);
        }

        .stone:hover {
            transform: scale(1.1);
        }

        .stone.last-move {
            box-shadow: 0 0 8px #ff6b6b, 0 2px 5px rgba(0,0,0,0.3);
        }

        .star-point {
            width: 6px;
            height: 6px;
            background: #2c1810;
            border-radius: 50%;
            position: absolute;
            z-index: 5;
            box-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .controls {
            width: 300px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .control-section {
            margin-bottom: 20px;
        }

        .toggle-section {
            text-align: center;
            margin-bottom: 20px;
        }

        .toggle-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .toggle-btn:hover {
            transform: translateY(-1px);
        }

        .current-player {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.2em;
            font-weight: bold;
        }

        .current-player.black {
            background: #333;
            color: white;
        }

        .current-player.white {
            background: #f0f0f0;
            color: #333;
            border: 2px solid #ccc;
        }

        .score {
            margin-bottom: 20px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .score h3 {
            margin: 0 0 10px 0;
            color: #333;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-info {
            background: #17a2b8;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .move-history, .saved-games {
            max-height: 200px;
            overflow-y: auto;
            background: white;
            border-radius: 8px;
            padding: 10px;
            margin-top: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .move-history h4, .saved-games h4 {
            margin: 0 0 10px 0;
            color: #333;
        }

        .move-item {
            font-size: 0.9em;
            padding: 2px 0;
            border-bottom: 1px solid #eee;
        }

        .saved-game-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 5px;
            border: 1px solid #dee2e6;
        }

        .saved-game-info {
            flex: 1;
            font-size: 0.85em;
        }

        .saved-game-name {
            font-weight: bold;
            color: #333;
        }

        .saved-game-date {
            color: #666;
            font-size: 0.8em;
        }

        .saved-game-actions {
            display: flex;
            gap: 5px;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 0.8em;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-small.load {
            background: #17a2b8;
            color: white;
        }

        .btn-small.delete {
            background: #dc3545;
            color: white;
        }

        .btn-small:hover {
            transform: translateY(-1px);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 15% auto;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .modal h3 {
            margin: 0 0 15px 0;
            color: #333;
        }

        .modal input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            margin-bottom: 15px;
            box-sizing: border-box;
        }

        .modal input:focus {
            outline: none;
            border-color: #667eea;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .controls {
                width: 100%;
            }
            
            .board-grid {
                grid-template-columns: repeat(19, 20px);
                grid-template-rows: repeat(19, 20px);
            }
            
            .intersection {
                width: 20px;
                height: 20px;
            }
            
            .stone {
                width: 18px;
                height: 18px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”´âšª ë°”ë‘‘ ì—°ìŠµ ì›¹ì•±</h1>
        </div>
        
        <div class="game-area">
            <div class="board-container">
                <div class="board">
                    <div class="board-grid" id="board"></div>
                </div>
            </div>
            
            <div class="controls">
                <div class="current-player" id="currentPlayer">
                    í‘ëŒ ì°¨ë¡€
                </div>
                
                <div class="toggle-section">
                    <button class="toggle-btn active" id="showNumbersBtn" onclick="toggleMoveNumbers()">
                        ìˆ˜ìˆœ í‘œì‹œ
                    </button>
                </div>
                
                <div class="score control-section">
                    <h3>ì ìˆ˜</h3>
                    <div class="score-item">
                        <span>í‘ëŒ í¬ë¡œ:</span>
                        <span id="blackCaptures">0</span>
                    </div>
                    <div class="score-item">
                        <span>ë°±ëŒ í¬ë¡œ:</span>
                        <span id="whiteCaptures">0</span>
                    </div>
                </div>
                
                <div class="buttons">
                    <button class="btn btn-secondary" onclick="passMove()">íŒ¨ìŠ¤</button>
                    <button class="btn btn-primary" onclick="undoMove()">ë¬´ë¥´ê¸°</button>
                    <button class="btn btn-success" onclick="saveGame()">ê²Œì„ ì €ì¥</button>
                    <button class="btn btn-info" onclick="loadGame()">ê²Œì„ ë¶ˆëŸ¬ì˜¤ê¸°</button>
                    <button class="btn btn-danger" onclick="resetGame()">ìƒˆ ê²Œì„</button>
                </div>
                
                <div class="move-history">
                    <h4>ìˆ˜ìˆœ</h4>
                    <div id="moveHistory"></div>
                </div>
                
                <div class="saved-games control-section">
                    <h4>ì €ì¥ëœ ê²Œì„</h4>
                    <div id="savedGamesList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì €ì¥ ëª¨ë‹¬ -->
    <div id="saveModal" class="modal">
        <div class="modal-content">
            <h3>ê²Œì„ ì €ì¥</h3>
            <input type="text" id="gameNameInput" placeholder="ê²Œì„ ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="30">
            <div class="modal-buttons">
                <button class="btn btn-primary" onclick="confirmSaveGame()">ì €ì¥</button>
                <button class="btn btn-secondary" onclick="closeSaveModal()">ì·¨ì†Œ</button>
            </div>
        </div>
    </div>

    <script>
        class BadukGame {
            constructor() {
                this.board = Array(19).fill().map(() => Array(19).fill(0));
                this.currentPlayer = 1; // 1: í‘ëŒ, -1: ë°±ëŒ
                this.moveHistory = [];
                this.captures = { black: 0, white: 0 };
                this.ko = null;
                this.showMoveNumbers = true;
                this.initializeBoard();
                this.updateUI();
                this.loadSavedGamesList();
            }

            initializeBoard() {
                const boardElement = document.getElementById('board');
                boardElement.innerHTML = '';

                // ë³„ì  ìœ„ì¹˜
                const starPoints = [
                    [3, 3], [3, 9], [3, 15],
                    [9, 3], [9, 9], [9, 15],
                    [15, 3], [15, 9], [15, 15]
                ];

                for (let row = 0; row < 19; row++) {
                    for (let col = 0; col < 19; col++) {
                        const intersection = document.createElement('div');
                        intersection.className = 'intersection';
                        
                        // ê²½ê³„ì„  í´ë˜ìŠ¤ ì¶”ê°€
                        if (row === 0) intersection.classList.add('top-edge');
                        if (row === 18) intersection.classList.add('bottom-edge');
                        if (col === 0) intersection.classList.add('left-edge');
                        if (col === 18) intersection.classList.add('right-edge');

                        intersection.dataset.row = row;
                        intersection.dataset.col = col;
                        intersection.onclick = () => this.makeMove(row, col);

                        // ë³„ì  ì¶”ê°€
                        if (starPoints.some(([r, c]) => r === row && c === col)) {
                            const starPoint = document.createElement('div');
                            starPoint.className = 'star-point';
                            intersection.appendChild(starPoint);
                        }

                        boardElement.appendChild(intersection);
                    }
                }
            }

            makeMove(row, col) {
                if (this.board[row][col] !== 0) return;

                // ì„ì‹œë¡œ ëŒì„ ë†“ì•„ë³´ê¸°
                this.board[row][col] = this.currentPlayer;

                // ìƒëŒ€ë°© ëŒ ì¡ê¸° í™•ì¸
                const captured = this.checkCaptures(-this.currentPlayer);
                
                // ìì‚´ìˆ˜ í™•ì¸ (ìƒëŒ€ë°©ì„ ì¡ì§€ ëª»í–ˆì„ ë•Œë§Œ)
                if (captured === 0 && this.checkCaptures(this.currentPlayer) > 0) {
                    this.board[row][col] = 0;
                    alert('ìì‚´ìˆ˜ëŠ” ë‘˜ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                    return;
                }

                // íŒ¨ í™•ì¸
                const boardString = JSON.stringify(this.board);
                if (this.ko === boardString) {
                    this.board[row][col] = 0;
                    alert('íŒ¨ ê·œì¹™ì— ì˜í•´ ë‘˜ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!');
                    return;
                }

                // ìœ íš¨í•œ ìˆ˜ë¡œ í™•ì •
                const move = {
                    player: this.currentPlayer,
                    row: row,
                    col: col,
                    captured: captured,
                    boardState: JSON.parse(JSON.stringify(this.board)),
                    moveNumber: this.moveHistory.filter(m => !m.pass).length + 1
                };

                this.moveHistory.push(move);

                // í¬ë¡œ ì—…ë°ì´íŠ¸
                if (this.currentPlayer === 1) {
                    this.captures.black += captured;
                } else {
                    this.captures.white += captured;
                }

                // íŒ¨ ìƒí™© ì—…ë°ì´íŠ¸
                if (captured === 1 && this.moveHistory.length > 1) {
                    this.ko = JSON.stringify(this.moveHistory[this.moveHistory.length - 2].boardState);
                } else {
                    this.ko = null;
                }

                this.currentPlayer = -this.currentPlayer;
                this.updateUI();
            }

            checkCaptures(player) {
                let totalCaptured = 0;
                const visited = Array(19).fill().map(() => Array(19).fill(false));

                for (let row = 0; row < 19; row++) {
                    for (let col = 0; col < 19; col++) {
                        if (this.board[row][col] === player && !visited[row][col]) {
                            const group = this.getGroup(row, col, visited);
                            if (this.getLiberty(group) === 0) {
                                // ê·¸ë£¹ ì œê±°
                                group.forEach(([r, c]) => {
                                    this.board[r][c] = 0;
                                });
                                totalCaptured += group.length;
                            }
                        }
                    }
                }

                return totalCaptured;
            }

            getGroup(row, col, visited) {
                const player = this.board[row][col];
                const group = [];
                const stack = [[row, col]];

                while (stack.length > 0) {
                    const [r, c] = stack.pop();
                    if (visited[r][c]) continue;

                    visited[r][c] = true;
                    group.push([r, c]);

                    // ì¸ì ‘í•œ ê°™ì€ ìƒ‰ ëŒ ì°¾ê¸°
                    const neighbors = [
                        [r-1, c], [r+1, c], [r, c-1], [r, c+1]
                    ];

                    for (const [nr, nc] of neighbors) {
                        if (nr >= 0 && nr < 19 && nc >= 0 && nc < 19 && 
                            !visited[nr][nc] && this.board[nr][nc] === player) {
                            stack.push([nr, nc]);
                        }
                    }
                }

                return group;
            }

            getLiberty(group) {
                const liberties = new Set();

                for (const [row, col] of group) {
                    const neighbors = [
                        [row-1, col], [row+1, col], [row, col-1], [row, col+1]
                    ];

                    for (const [nr, nc] of neighbors) {
                        if (nr >= 0 && nr < 19 && nc >= 0 && nc < 19 && 
                            this.board[nr][nc] === 0) {
                            liberties.add(`${nr},${nc}`);
                        }
                    }
                }

                return liberties.size;
            }

            updateUI() {
                // ë°”ë‘‘íŒ ì—…ë°ì´íŠ¸
                const intersections = document.querySelectorAll('.intersection');
                intersections.forEach((intersection, index) => {
                    const row = Math.floor(index / 19);
                    const col = index % 19;
                    
                    // ê¸°ì¡´ ëŒ ì œê±°
                    const existingStone = intersection.querySelector('.stone');
                    if (existingStone) {
                        existingStone.remove();
                    }

                    // ìƒˆ ëŒ ì¶”ê°€
                    if (this.board[row][col] !== 0) {
                        const stone = document.createElement('div');
                        stone.className = `stone ${this.board[row][col] === 1 ? 'black' : 'white'}`;
                        
                        // ìˆ˜ìˆœ ë²ˆí˜¸ ì°¾ê¸°
                        const moveIndex = this.moveHistory.findIndex(move => 
                            !move.pass && move.row === row && move.col === col
                        );
                        
                        if (moveIndex !== -1 && this.showMoveNumbers) {
                            const moveNumber = this.moveHistory[moveIndex].moveNumber;
                            stone.textContent = moveNumber;
                        }
                        
                        // ë§ˆì§€ë§‰ ìˆ˜ ê°•ì¡°
                        if (this.moveHistory.length > 0 && 
                            !this.moveHistory[this.moveHistory.length - 1].pass &&
                            this.moveHistory[this.moveHistory.length - 1].row === row &&
                            this.moveHistory[this.moveHistory.length - 1].col === col) {
                            stone.classList.add('last-move');
                        }
                        
                        intersection.appendChild(stone);
                    }
                });

                // í˜„ì¬ í”Œë ˆì´ì–´ í‘œì‹œ
                const currentPlayerElement = document.getElementById('currentPlayer');
                if (this.currentPlayer === 1) {
                    currentPlayerElement.textContent = 'í‘ëŒ ì°¨ë¡€';
                    currentPlayerElement.className = 'current-player black';
                } else {
                    currentPlayerElement.textContent = 'ë°±ëŒ ì°¨ë¡€';
                    currentPlayerElement.className = 'current-player white';
                }

                // í¬ë¡œìˆ˜ ì—…ë°ì´íŠ¸
                document.getElementById('blackCaptures').textContent = this.captures.black;
                document.getElementById('whiteCaptures').textContent = this.captures.white;

                // ìˆ˜ìˆœ ì—…ë°ì´íŠ¸
                this.updateMoveHistory();
                
                // ì €ì¥ëœ ê²Œì„ ëª©ë¡ ì—…ë°ì´íŠ¸
                this.loadSavedGamesList();
            }

            updateMoveHistory() {
                const historyElement = document.getElementById('moveHistory');
                historyElement.innerHTML = '';

                const realMoves = this.moveHistory.filter(move => !move.pass);
                realMoves.slice(-10).forEach((move, index) => {
                    const moveItem = document.createElement('div');
                    moveItem.className = 'move-item';
                    const playerName = move.player === 1 ? 'í‘' : 'ë°±';
                    const position = String.fromCharCode(65 + move.col) + (19 - move.row);
                    moveItem.textContent = `${move.moveNumber}. ${playerName} ${position}`;
                    historyElement.appendChild(moveItem);
                });
            }

            toggleMoveNumbers() {
                this.showMoveNumbers = !this.showMoveNumbers;
                const btn = document.getElementById('showNumbersBtn');
                if (this.showMoveNumbers) {
                    btn.classList.add('active');
                    btn.textContent = 'ìˆ˜ìˆœ í‘œì‹œ';
                } else {
                    btn.classList.remove('active');
                    btn.textContent = 'ìˆ˜ìˆœ ìˆ¨ê¹€';
                }
                this.updateUI();
            }

            passMove() {
                this.currentPlayer = -this.currentPlayer;
                const move = {
                    player: -this.currentPlayer,
                    pass: true,
                    boardState: JSON.parse(JSON.stringify(this.board))
                };
                this.moveHistory.push(move);
                this.updateUI();
            }

            undoMove() {
                if (this.moveHistory.length === 0) return;

                const lastMove = this.moveHistory.pop();
                
                if (lastMove.pass) {
                    this.currentPlayer = -this.currentPlayer;
                } else {
                    // ë³´ë“œ ìƒíƒœ ë³µì›
                    if (this.moveHistory.length > 0) {
                        this.board = JSON.parse(JSON.stringify(this.moveHistory[this.moveHistory.length - 1].boardState));
                    } else {
                        this.board = Array(19).fill().map(() => Array(19).fill(0));
                    }

                    // í¬ë¡œìˆ˜ ë³µì›
                    if (lastMove.player === 1) {
                        this.captures.black -= lastMove.captured;
                    } else {
                        this.captures.white -= lastMove.captured;
                    }

                    this.currentPlayer = lastMove.player;
                }

                this.updateUI();
            }

            resetGame() {
                this.board = Array(19).fill().map(() => Array(19).fill(0));
                this.currentPlayer = 1;
                this.moveHistory = [];
                this.captures = { black: 0, white: 0 };
                this.ko = null;
                this.updateUI();
            }

            saveGameData(gameName) {
                const gameData = {
                    name: gameName,
                    date: new Date().toLocaleString('ko-KR'),
                    board: JSON.parse(JSON.stringify(this.board)),
                    currentPlayer: this.currentPlayer,
                    moveHistory: JSON.parse(JSON.stringify(this.moveHistory)),
                    captures: JSON.parse(JSON.stringify(this.captures)),
                    ko: this.ko
                };

                const savedGames = JSON.parse(localStorage.getItem('badukSavedGames') || '{}');
                const gameId = Date.now().toString();
                savedGames[gameId] = gameData;
                localStorage.setItem('badukSavedGames', JSON.stringify(savedGames));
                
                this.loadSavedGamesList();
                return true;
            }

            loadGameData(gameId) {
                const savedGames = JSON.parse(localStorage.getItem('badukSavedGames') || '{}');
                const gameData = savedGames[gameId];
                
                if (!gameData) return false;

                this.board = JSON.parse(JSON.stringify(gameData.board));
                this.currentPlayer = gameData.currentPlayer;
                this.moveHistory = JSON.parse(JSON.stringify(gameData.moveHistory));
                this.captures = JSON.parse(JSON.stringify(gameData.captures));
                this.ko = gameData.ko;
                
                this.updateUI();
                return true;
            }

            deleteGameData(gameId) {
                const savedGames = JSON.parse(localStorage.getItem('badukSavedGames') || '{}');
                delete savedGames[gameId];
                localStorage.setItem('badukSavedGames', JSON.stringify(savedGames));
                this.loadSavedGamesList();
            }

            loadSavedGamesList() {
                const savedGames = JSON.parse(localStorage.getItem('badukSavedGames') || '{}');
                const listElement = document.getElementById('savedGamesList');
                listElement.innerHTML = '';

                const gameIds = Object.keys(savedGames).sort((a, b) => b - a); // ìµœì‹ ìˆœ

                if (gameIds.length === 0) {
                    listElement.innerHTML = '<div style="text-align: center; color: #666; font-size: 0.9em;">ì €ì¥ëœ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤</div>';
                    return;
                }

                gameIds.forEach(gameId => {
                    const game = savedGames[gameId];
                    const gameItem = document.createElement('div');
                    gameItem.className = 'saved-game-item';
                    
                    gameItem.innerHTML = `
                        <div class="saved-game-info">
                            <div class="saved-game-name">${game.name}</div>
                            <div class="saved-game-date">${game.date}</div>
                        </div>
                        <div class="saved-game-actions">
                            <button class="btn-small load" onclick="loadSpecificGame('${gameId}')">ë¶ˆëŸ¬ì˜¤ê¸°</button>
                            <button class="btn-small delete" onclick="deleteSpecificGame('${gameId}')">ì‚­ì œ</button>
                        </div>
                    `;
                    
                    listElement.appendChild(gameItem);
                });
            }
        }

        // ê²Œì„ ì‹œì‘
        let game;

        window.onload = function() {
            game = new BadukGame();
        };

        function passMove() {
            game.passMove();
        }

        function undoMove() {
            game.undoMove();
        }

        function resetGame() {
            if (confirm('ì •ë§ ìƒˆ ê²Œì„ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                game.resetGame();
            }
        }

        function toggleMoveNumbers() {
            game.toggleMoveNumbers();
        }

        function saveGame() {
            document.getElementById('saveModal').style.display = 'block';
            document.getElementById('gameNameInput').focus();
        }

        function closeSaveModal() {
            document.getElementById('saveModal').style.display = 'none';
            document.getElementById('gameNameInput').value = '';
        }

        function confirmSaveGame() {
            const gameName = document.getElementById('gameNameInput').value.trim();
            if (!gameName) {
                alert('ê²Œì„ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (game.saveGameData(gameName)) {
                alert('ê²Œì„ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                closeSaveModal();
            } else {
                alert('ê²Œì„ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        }

        function loadGame() {
            const savedGames = JSON.parse(localStorage.getItem('badukSavedGames') || '{}');
            if (Object.keys(savedGames).length === 0) {
                alert('ì €ì¥ëœ ê²Œì„ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            alert('ì•„ë˜ ì €ì¥ëœ ê²Œì„ ëª©ë¡ì—ì„œ ë¶ˆëŸ¬ì˜¬ ê²Œì„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        }

        function loadSpecificGame(gameId) {
            if (confirm('í˜„ì¬ ê²Œì„ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤. ì €ì¥ëœ ê²Œì„ì„ ë¶ˆëŸ¬ì˜¤ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                if (game.loadGameData(gameId)) {
                    alert('ê²Œì„ì„ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤!');
                } else {
                    alert('ê²Œì„ ë¶ˆëŸ¬ì˜¤ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            }
        }

        function deleteSpecificGame(gameId) {
            if (confirm('ì´ ê²Œì„ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                game.deleteGameData(gameId);
                alert('ê²Œì„ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì—”í„° í‚¤ë¡œ ì €ì¥
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('gameNameInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    confirmSaveGame();
                }
            });
            
            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
            document.getElementById('saveModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeSaveModal();
                }
            });
        });
    </script>
</body>
</html>